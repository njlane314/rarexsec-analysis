@startuml
left to right direction
skinparam {
  linetype ortho
  packageStyle rectangle
  classAttributeIconSize 0
  shadowing false
  dpi 150
  pageMargin 10
  pageWidth 8.27in
  pageHeight 11.69in
  roundCorner 15
  classFontName Helvetica
}

hide empty members

package app #LightGray {
  top to bottom direction
  interface ISampleProcessor {
    +processSample()
  }

  class DataProcessor {
    +processSample()
  }

  class MonteCarloProcessor {
    +processSample()
  }

  class AnalysisRunner {
    +run()
  }
}

ISampleProcessor <|-- DataProcessor
ISampleProcessor <|-- MonteCarloProcessor
AnalysisRunner --> ISampleProcessor : runs
DataProcessor --> IEventProcessor : uses
MonteCarloProcessor --> IEventProcessor : uses
AnalysisRunner --> IAnalysisPlugin : loads
AnalysisRunner --> IPlotPlugin : loads
AnalysisRunner --> SystematicStrategy : configures

package data #LightBlue {
  top to bottom direction
  interface IEventProcessor {
    +processEvent()
  }

  class MuonSelectionProcessor {
    +processEvent()
  }

  class ReconstructionProcessor {
    +processEvent()
  }

  class TruthChannelProcessor {
    +processEvent()
  }

  class WeightProcessor {
    +processEvent()
  }

  class BlipProcessor {
    +processEvent()
  }
}

IEventProcessor <|-- MuonSelectionProcessor
IEventProcessor <|-- ReconstructionProcessor
IEventProcessor <|-- TruthChannelProcessor
IEventProcessor <|-- WeightProcessor
IEventProcessor <|-- BlipProcessor

package plug #LightYellow {
  top to bottom direction
  interface IAnalysisPlugin {
    +execute()
  }

  class AnalysisPluginManager {
    +register()
  }

  interface IPlotPlugin {
    +render()
  }

  class PlotPluginManager {
    +register()
  }
}

AnalysisPluginManager o--> IAnalysisPlugin : manages
PlotPluginManager o--> IPlotPlugin : manages

package plot #LightGreen {
  top to bottom direction
  class IHistogramPlot {
    +plot()
  }

  class StackedHistogramPlot
  class UnstackedHistogramPlot
  class OccupancyMatrixPlot
  class SelectionEfficiencyPlot
  class SystematicBreakdownPlot
  class RocCurvePlot
}

IHistogramPlot <|-- StackedHistogramPlot
IHistogramPlot <|-- UnstackedHistogramPlot
IHistogramPlot <|-- OccupancyMatrixPlot
IHistogramPlot <|-- SelectionEfficiencyPlot
IHistogramPlot <|-- SystematicBreakdownPlot
IHistogramPlot <|-- RocCurvePlot

package syst #LightPink {
  top to bottom direction
  class SystematicStrategy {
    +apply()
  }

  class UniverseSystematicStrategy {
    +apply()
  }

  class DetectorSystematicStrategy {
    +apply()
  }

  class WeightSystematicStrategy {
    +apply()
  }
}

SystematicStrategy <|-- UniverseSystematicStrategy
SystematicStrategy <|-- DetectorSystematicStrategy
SystematicStrategy <|-- WeightSystematicStrategy

@enduml
